<div class="container py-5" data-aos="fade-up">
  <div class="row align-items-center">
    <div class="col-md-6 mb-4">
      <% if @product.image.attached? %>
        <%= image_tag @product.image, class: "img-fluid rounded-4 shadow-lg" %>
      <% end %>
    </div>
    <div class="col-md-6">
      <h1 class="fw-bold text-primary"><%= @product.name %></h1>
      <p class="text-muted fs-5 mt-3"><%= @product.description %></p>
      <% if @product.price.present? %>
        <h3 class="fw-bold text-dark mt-4">₹<%= number_with_precision(@product.price, precision: 2) %></h3>
      <% end %>
      <p class="mt-3"><strong>Category:</strong> <%= @product.subcategory&.name || @product.category&.name || "N/A" %></p>
      <%= link_to "Back to Products", products_path, class: "btn btn-outline-primary rounded-pill px-4 mt-3" %>
    </div>
  </div>

  <hr class="my-5">

  <div class="related-section">
    <h3 class="fw-bold text-primary mb-4">Related Products</h3>
    <div class="row g-4">
      <% @related_products.each do |related| %>
        <div class="col-lg-3 col-md-4 col-sm-6" data-aos="fade-up">
          <%= link_to product_path(related), class: "text-decoration-none" do %>
            <div class="related-card rounded-4 overflow-hidden shadow-sm">
              <% if related.image.attached? %>
                <%= image_tag related.image, class: "img-fluid related-img" %>
              <% end %>
              <div class="p-3 text-center">
                <h6 class="fw-bold text-dark"><%= related.name %></h6>
                <% if related.price.present? %>
                  <p class="text-primary mb-0 fw-bold">₹<%= number_with_precision(related.price, precision: 2) %></p>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<style>
.related-card {
  transition: all 0.3s ease;
}
.related-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 30px rgba(0,0,0,0.15);
}
.related-img {
  height: 180px;
  width: 100%;
  object-fit: cover;
}
</style>
